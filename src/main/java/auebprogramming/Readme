📋 ΠΕΡΙΓΡΑΦΗ ΚΛΑΣΕΩΝ
1. BudgetChangesEntry.java (core/)
Τι είναι: Η βασική οντότητα του συστήματος - αντιπροσωπεύει μια γραμμή του προϋπολογισμού.

Τι κάνει:

Αποθηκεύει τα 3 βασικά στοιχεία μιας προϋπολογιστικής γραμμής:

Κωδικός (π.χ. "1110103") - μοναδικός αναγνωριστικός αριθμός

Περιγραφή (π.χ. "ΦΠΑ από ηλεκτρονικό εμπόριο")

Ποσό (π.χ. 250.000.000€) - χρησιμοποιεί BigDecimal για ακρίβεια

Επιτρέπει αλλαγή μόνο του ποσού (ο κωδικός και η περιγραφή είναι immutable)

Υλοποιεί equals() και hashCode() με βάση τον κωδικό

Εμφανίζει μορφοποιημένα αποτελέσματα μέσω toString()

Χρήση:

java
BudgetChangesEntry entry = new BudgetChangesEntry("1110103", "ΦΠΑ ηλεκτρονικού", 250000000);

2. BudgetRepository.java (repository/)
Τι είναι: Το "γραμματοκιβώτιο" που κρατάει όλες τις προϋπολογιστικές γραμμές.

Τι κάνει:

Αποθηκεύει όλες τις BudgetEntry σε μια HashMap (key = κωδικός)

Παρέχει CRUD λειτουργίες:

Αποθήκευση/ενημέρωση εγγραφών (save())

Αναζήτηση με κωδικό (findByCode())

Λήψη όλων των εγγραφών (findAll())

Αναζήτηση με βάση περιγραφή (findByDescriptionContaining())

Διαγραφή εγγραφών (delete())

Υπολογισμός συνολικού ποσού (calculateTotal())

Έλεγχος ύπαρξης κωδικού (exists())

Χρήση:

java
repository.save(entry);
Optional<BudgetChangesEntry> found = repository.findByCode("1110103");
BigDecimal total = repository.calculateTotal();

3. ChangeType.java (change/)
Τι είναι: Enumeration με τους τύπους αλλαγών που υποστηρίζει το σύστημα.

Τι περιέχει:

ABSOLUTE_INCREASE - Απόλυτη αύξηση (π.χ. +1.000.000€)

ABSOLUTE_DECREASE - Απόλυτη μείωση (π.χ. -500.000€)

PERCENTAGE_INCREASE - Ποσοστιαία αύξηση (π.χ. +10%)

PERCENTAGE_DECREASE - Ποσοστιαία μείωση (π.χ. -5%)

TRANSFER - Μεταφορά ποσού από έναν κωδικό σε άλλον

CORRECTION - Διόρθωση λάθους

4. BudgetChange.java (change/)
Τι είναι: Abstract κλάση που αντιπροσωπεύει μια γενική αλλαγή (Command Pattern).

Τι κάνει:

Είναι η βασική "εντολή" που μπορεί να εκτελεστεί και να ακυρωθεί

Κρατάει μεταδεδομένα: ποιος έκανε την αλλαγή, πότε, γιατί

Ορίζει τη διεπαφή για όλους τους τύπους αλλαγών

Υποστηρίζει Undo/Redo λειτουργικότητα

Μέθοδοι:

apply(BudgetChangesEntry) - Εφαρμόζει την αλλαγή

undo(BudgetChangesEntry) - Αναιρεί την αλλαγή

getDifference() - Επιστρέφει τη διαφορά ποσού

getType() - Επιστρέφει τον τύπο αλλαγής

5. AbsoluteAmountChange.java (change/)
Τι είναι: Αλλαγή με απόλυτη τιμή (προσθήκη ή αφαίρεση συγκεκριμένου ποσού).

Τι κάνει:

Προσθέτει ή αφαιρεί ένα σταθερό ποσό από μια εγγραφή

Ελέγχει ότι το νέο ποσό δεν είναι αρνητικό

Χρησιμοποιείται για απλές αυξομειώσεις

Παράδειγμα:

text
Εγγραφή: 250.000.000€
Αλλαγή: +50.000.000€
Αποτέλεσμα: 300.000.000€

6. PercentageChange.java (change/)
Τι είναι: Αλλαγή με ποσοστό (προσαύξηση ή μείωση κατά ποσοστό).

Τι κάνει:

Υπολογίζει ποσοστό του τρέχοντος ποσού

Εφαρμόζει το ποσοστό (θετικό για αύξηση, αρνητικό για μείωση)

Χρησιμοποιείται για αναλογικές αλλαγές

Παράδειγμα:

text
Εγγραφή: 250.000.000€
Αλλαγή: +10%
Αποτέλεσμα: 275.000.000€ (250M + 25M)

7. TransferChange.java (change/)
Τι είναι: Μεταφορά ποσού από μια προϋπολογιστική γραμμή σε άλλη.

Τι κάνει:

Αφαιρεί ποσό από τη πηγή (source)

Προσθέτει το ίδιο ποσό στον προορισμό (target)

Ελέγχει ότι η πηγή έχει αρκετό ποσό για μεταφορά

Χειρίζεται και τις δύο πλευρές της μεταφοράς

Παράδειγμα:

text
Πηγή (1110103): 250.000.000€
Προορισμός (1110302): 2.066.000.000€
Μεταφορά: 30.000.000€

Αποτέλεσμα:
Πηγή: 220.000.000€
Προορισμός: 2.096.000.000€

8. ChangeManager.java (change/)
Τι είναι: Ο κεντρικός διαχειριστής αλλαγών (Facade Pattern).

Τι κάνει:

Ενώνει όλες τις λειτουργίες αλλαγών σε μια απλή διεπαφή

Υλοποιεί Undo/Redo με stacks

Κρατάει ιστορικό όλων των αλλαγών

Χειρίζεται σύνθετες λειτουργίες (όπως μεταφορές)

Βασικές Μέθοδοι:

increaseAmount() - Απόλυτη αύξηση

decreaseAmount() - Απόλυτη μείωση

increaseByPercentage() - Ποσοστιαία αύξηση

decreaseByPercentage() - Ποσοστιαία μείωση

transferAmount() - Μεταφορά ποσού

undo() - Αναίρεση τελευταίας αλλαγής

redo() - Επανάληψη τελευταίας αναίρεσης

Παράδειγμα:

java
changeManager.increaseAmount("1110103", 10000000, "Αιτία", "user123");
changeManager.undo(); // Αναίρεση

9. ChangeValidator.java (change/)
Τι είναι: Ελεγκτής εγκυρότητας αλλαγών πριν την εφαρμογή τους.

Τι ελέγχει:

Αν ο κωδικός υπάρχει στο repository

Αν το νέο ποσό θα είναι αρνητικό

Αν το ποσοστό είναι εντός λογικών ορίων (-100% έως +100%)

Αν η μεταφορά είναι δυνατή (αρκετό ποσό στην πηγή)

Αν οι αλλαγές είναι υπερβολικά μεγάλες

Χρήση:

java
ValidationResult result = validator.validateAbsoluteChange("1110103", 1000000);
if (result.isValid()) {
    // Εφαρμογή αλλαγής
}

10. BudgetImporter.java (util/)
Τι είναι: Βοηθητική κλάση για εισαγωγή δεδομένων από CSV αρχεία.

Τι κάνει:

Διαβάζει CSV αρχεία με μορφή: κωδικός,περιγραφή,ποσό

Μετατρέπει κάθε γραμμή σε BudgetEntry

Προσθέτει τις εγγραφές στο repository

Χρησιμοποιείται για αρχικοποίηση δεδομένων

Μορφή CSV:

text
1110103,ΦΠΑ από ηλεκτρονικό εμπόριο,250000000
1110302,ΕΦΚ βενζινών,2066000000